import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.zN5fG3AC.js";const y=JSON.parse('{"title":"è®¾è®¡æ¨¡å¼æµ…æ(äº”) Â·å•ä¾‹æ¨¡å¼","description":"","frontmatter":{},"headers":[],"relativePath":"articles/designPatterns/05-è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼/è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼.md","filePath":"articles/designPatterns/05-è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼/è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼.md","lastUpdated":1713496484000}'),l={name:"articles/designPatterns/05-è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼/è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼.md"},t=n(`<h1 id="è®¾è®¡æ¨¡å¼æµ…æ-äº”-Â·å•ä¾‹æ¨¡å¼" tabindex="-1">è®¾è®¡æ¨¡å¼æµ…æ(äº”) Â·å•ä¾‹æ¨¡å¼ <a class="header-anchor" href="#è®¾è®¡æ¨¡å¼æµ…æ-äº”-Â·å•ä¾‹æ¨¡å¼" aria-label="Permalink to &quot;è®¾è®¡æ¨¡å¼æµ…æ(äº”) Â·å•ä¾‹æ¨¡å¼&quot;">â€‹</a></h1><h2 id="æ—¥å¸¸å¨é€¼å¨" tabindex="-1">æ—¥å¸¸å¨é€¼å¨ <a class="header-anchor" href="#æ—¥å¸¸å¨é€¼å¨" aria-label="Permalink to &quot;æ—¥å¸¸å¨é€¼å¨&quot;">â€‹</a></h2><p>javaè®¾è®¡æ¨¡å¼æµ…æï¼Œå¦‚æœè§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—ä¸€é”®ä¸‰è¿ï¼Œè°¢è°¢å„ä½è§‚ä¼—è€çˆ·ğŸ˜ğŸ˜</p><hr><h2 id="å•ä¾‹æ¨¡å¼" tabindex="-1">å•ä¾‹æ¨¡å¼ <a class="header-anchor" href="#å•ä¾‹æ¨¡å¼" aria-label="Permalink to &quot;å•ä¾‹æ¨¡å¼&quot;">â€‹</a></h2><h4 id="æ¦‚å¿µ" tabindex="-1">æ¦‚å¿µ <a class="header-anchor" href="#æ¦‚å¿µ" aria-label="Permalink to &quot;æ¦‚å¿µ&quot;">â€‹</a></h4><p><strong>å•ä¾‹æ¨¡å¼</strong>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚</p><h2 id="æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨" tabindex="-1">æ‡’æ±‰å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨ <a class="header-anchor" href="#æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨" aria-label="Permalink to &quot;æ‡’æ±‰å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨&quot;">â€‹</a></h2><p>é‚£ä¹ˆæ€ä¹ˆæ„å»ºä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼Œä½¿å¾—åªè¿”å›å”¯ä¸€ä¸€ä¸ªå¯¹è±¡å®ä¾‹å‘¢ï¼Œæˆ‘è¿™é‡Œæä¾›äº†ä¸€ç§æ–¹æ³•</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //åˆ©ç”¨ä¸€ä¸ªé™æ€å˜é‡æ¥è®°å½•SingleInstanceç±»çš„å”¯ä¸€å®ä¾‹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance singleInstance;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //æŠŠæ„é€ å™¨å£°æ˜ä¸ºç§æœ‰çš„ï¼Œåªæœ‰SingleInstanceç±»å†…æ‰å¯ä»¥è°ƒç”¨æ„é€ å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¦‚æœå®ƒä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨ç§æœ‰çš„æ„é€ å™¨äº§ç”Ÿä¸€ä¸ªSingleInstanceå®ä¾‹å¹¶æŠŠå®ƒèµ‹å€¼åˆ°singleInstanceé™æ€å˜é‡ä¸­ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ä¸éœ€è¦è¿™ä¸ªå®ä¾‹ï¼Œå®ƒå°±æ°¸è¿œä¸ä¼šäº§ç”Ÿã€‚è¿™å°±æ˜¯â€œå»¶è¿Ÿå®ä¾‹åŒ–â€(laxy instantiaze)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (singleInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            singleInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å¦‚æœsingleInstanceä¸æ˜¯nullï¼Œå°±è¡¨ç¤ºä¹‹å‰å·²ç»åˆ›å»ºè¿‡å¯¹è±¡ã€‚æˆ‘ä»¬å°±ç›´æ¥è·³åˆ°returnè¯­å¥ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> singleInstance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>çœ‹èµ·æ¥å¥½åƒæ˜¯æ²¡æœ‰ä»€ä¹ˆå¤§çš„é—®é¢˜ æ€è·¯æ¸…æ™°ï¼Œä»£ç æ˜ç¡®ã€‚é‚£ä¹ˆæˆ‘ä»¬å†™å¦‚ä¸‹ä»£ç è¿›è¡Œæµ‹è¯•</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SingleInstance instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; &lt;çº¿ç¨‹&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ­£åœ¨è¿è¡Œ&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Client myThread </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            myThread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯åŠ¨çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>è¿è¡Œç»“æœï¼š</p><p>com.jerry.singlePattern.SingleInstance@294eb59e &lt;çº¿ç¨‹24æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance@4c3154fa &lt;çº¿ç¨‹23æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance@294eb59e &lt;çº¿ç¨‹20æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance@294eb59e &lt;çº¿ç¨‹21æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance@4add1757 &lt;çº¿ç¨‹22æ­£åœ¨è¿è¡Œ&gt;</p></blockquote><p>è¿è¡Œç»“æœå´æœ‰ç‚¹å‡ºä¹æ„æ–™ï¼Ÿï¼Ÿï¼Ÿæˆ‘ä»¬ä¸æ˜¯å•ä¾‹æ¨¡å¼å—ï¼Ÿæ€ä¹ˆåˆ›å»ºå‡ºè¿™ä¹ˆå¤šçš„<code>SingleInstance</code>å¯¹è±¡ï¼Ÿï¼Ÿ</p><blockquote><p>å‡ºç°ä¸Šè¿°é—®é¢˜çš„åŸå› æ˜¯<strong>å¤šçº¿ç¨‹</strong></p><p>åœ¨è¿™ä¸ªå®ç°æ–¹å¼ä¸­ï¼Œ<code>getInstance()</code> æ–¹æ³•ä¼šæ£€æŸ¥ <code>singleInstance</code> æ˜¯å¦ä¸º <code>null</code>ï¼Œå¦‚æœæ˜¯åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>singleInstance</code> å®ä¾‹ã€‚é—®é¢˜å‡ºåœ¨å¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶æ£€æŸ¥åˆ° <code>singleInstance</code> ä¸º <code>null</code>ï¼Œç„¶åæ¯ä¸ªçº¿ç¨‹éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè¿™å°±è¿èƒŒäº†å•ä¾‹æ¨¡å¼çš„åˆè¡·ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ T1 å’Œ T2 åŒæ—¶è°ƒç”¨ <code>getInstance()</code> æ–¹æ³•ã€‚ç”±äº <code>singleInstance</code> çš„åˆå§‹å€¼ä¸º <code>null</code>ï¼ŒT1 å’Œ T2 éƒ½ä¼šè¿›å…¥ <code>if (singleInstance== null)</code> çš„åˆ¤æ–­ã€‚ç”±äºè¿™ä¸¤ä¸ªçº¿ç¨‹æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œå®ƒä»¬å¯èƒ½ä¼šåŒæ—¶è¿›å…¥è¿™ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œå¹¶ä¸”éƒ½é€šè¿‡åˆ¤æ–­ï¼Œç„¶åå„è‡ªåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>singleInstance</code> å®ä¾‹ã€‚è¿™å°±å¯¼è‡´äº†å¤šä¸ªå®ä¾‹è¢«åˆ›å»ºï¼Œè¿åäº†å•ä¾‹æ¨¡å¼çš„è§„åˆ™ã€‚</p></blockquote><h2 id="æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨-åŒæ­¥æ–¹æ³•" tabindex="-1">æ‡’æ±‰å¼ï¼šçº¿ç¨‹å®‰å…¨ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰ <a class="header-anchor" href="#æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨-åŒæ­¥æ–¹æ³•" aria-label="Permalink to &quot;æ‡’æ±‰å¼ï¼šçº¿ç¨‹å®‰å…¨ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰&quot;">â€‹</a></h2><p>æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°ä»£ç ç¨åŠ ä¿®æ”¹ï¼Œé€šè¿‡å¢åŠ synchronizedå…³é”®æ‰‹åˆ°getInstance()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è¿«ä½¿æ¯ä¸ªçº¿ç¨‹åœ¨è¿›å…¥è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œè¦å…ˆç­‰å€™åˆ«çš„çº¿ç¨‹ç¦»å¼€è¯¥æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä¼šæœ‰ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¿›å…¥è¿™ä¸ªæ–¹æ³•ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance2 singleInstance;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance2 </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (singleInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            singleInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> singleInstance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>è¿è¡Œç»“æœï¼š</p><p>com.jerry.singlePattern.SingleInstance2@5a506132 &lt;çº¿ç¨‹23æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance2@5a506132 &lt;çº¿ç¨‹21æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance2@5a506132 &lt;çº¿ç¨‹22æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance2@5a506132 &lt;çº¿ç¨‹24æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance2@5a506132 &lt;çº¿ç¨‹20æ­£åœ¨è¿è¡Œ&gt;</p></blockquote><p>è™½ç„¶å®ç°äº†åŒæ­¥ï¼Œå®ç°äº†å•ä¾‹ï¼Œä½†æ˜¯ä¸Šè¿°æ–¹æ³•çš„ç¡®æ˜¯æœ‰ä¸€ç‚¹ä¸å¥½ã€‚è€Œæ¯”æƒ³è±¡çš„è¿˜è¦ä¸¥é‡ä¸€äº›çš„æ˜¯:åªæœ‰ç¬¬ä¸€æ¬¡æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œæ‰çœŸæ­£éœ€è¦åŒæ­¥ã€‚æ¢å¥è¯è¯´ï¼Œä¸€æ—¦è®¾ç½®å¥½singleInstanceå˜é‡ï¼Œå°±ä¸å†éœ€è¦åŒæ­¥è¿™ä¸ªæ–¹æ³•äº†ã€‚ä¹‹åæ¯æ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼ŒåŒæ­¥éƒ½æ˜¯ä¸€ç§ç´¯èµ˜ã€‚</p><h2 id="æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨-åŒé‡æ£€æŸ¥é”å®š" tabindex="-1">æ‡’æ±‰å¼ï¼šçº¿ç¨‹å®‰å…¨ï¼ˆåŒé‡æ£€æŸ¥é”å®šï¼‰ <a class="header-anchor" href="#æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨-åŒé‡æ£€æŸ¥é”å®š" aria-label="Permalink to &quot;æ‡’æ±‰å¼ï¼šçº¿ç¨‹å®‰å…¨ï¼ˆåŒé‡æ£€æŸ¥é”å®šï¼‰&quot;">â€‹</a></h2><p>é‚£ä¹ˆåœ¨è¿›è¡Œä¸€äº›ç¨‹åºä¸Šçš„ä¿®æ”¹ï¼Œåˆ©ç”¨åŒé‡æ£€æŸ¥åŠ é”(double-checked locking)ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦å®ä¾‹å·²ç»åˆ›å»ºäº†ï¼Œå¦‚æœå°šæœªåˆ›å»ºï¼Œâ€œæ‰â€è¿›è¡ŒåŒæ­¥ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä¼šåŒæ­¥ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance3 singleInstance;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance3 </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (singleInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SingleInstance3.class) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (singleInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    singleInstance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> singleInstance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>è¿è¡Œç»“æœï¼š</p><p>com.jerry.singlePattern.SingleInstance3@1aef3070 &lt;çº¿ç¨‹24æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance3@1aef3070 &lt;çº¿ç¨‹21æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance3@1aef3070 &lt;çº¿ç¨‹20æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance3@1aef3070 &lt;çº¿ç¨‹23æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance3@1aef3070 &lt;çº¿ç¨‹22æ­£åœ¨è¿è¡Œ&gt;</p></blockquote><p>è¿™ç§å®ç°æ–¹å¼æ—¢ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œåˆé¿å…äº†ä¸å¿…è¦çš„åŒæ­¥ï¼Œæé«˜äº†æ•ˆç‡ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJava 1.5 ä»¥å‰çš„ç‰ˆæœ¬å¯¹ volatile çš„æ”¯æŒå¹¶ä¸å®Œå–„ï¼Œå› æ­¤åœ¨ Java 1.5 ä»¥å‰çš„ç‰ˆæœ¬ä¸­ä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šå¯èƒ½ä¼šå­˜åœ¨é—®é¢˜ã€‚</p><p>é™¤äº†ä¸Šè¿°çš„å‡ ç§æ–¹æ¡ˆï¼Œè¿˜æœ‰ä¸€äº›æ–¹æ¡ˆå®ç°å•ä¾‹æ¨¡å¼ï¼š</p><h2 id="é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨" tabindex="-1">é¥¿æ±‰å¼ï¼šçº¿ç¨‹å®‰å…¨ <a class="header-anchor" href="#é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨" aria-label="Permalink to &quot;é¥¿æ±‰å¼ï¼šçº¿ç¨‹å®‰å…¨&quot;">â€‹</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åœ¨ç±»åŠ è½½æ—¶å°±å®Œæˆäº†åˆå§‹åŒ–ï¼Œæ‰€ä»¥ç±»åŠ è½½è¾ƒæ…¢ï¼Œä½†è·å–å¯¹è±¡çš„é€Ÿåº¦å¿«</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance1 singleInstance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance1 </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> singleInstance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>è¿è¡Œç»“æœ</p><p>com.jerry.singlePattern.SingleInstance1@7070e0ed &lt;çº¿ç¨‹20æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance1@7070e0ed &lt;çº¿ç¨‹24æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance1@7070e0ed &lt;çº¿ç¨‹21æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance1@7070e0ed &lt;çº¿ç¨‹23æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance1@7070e0ed &lt;çº¿ç¨‹22æ­£åœ¨è¿è¡Œ&gt;</p></blockquote><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>SingleInstance1</code>ç±»çš„<code>singleInstance</code>æˆå‘˜å˜é‡åœ¨ç±»åŠ è½½æ—¶å°±è¢«åˆå§‹åŒ–äº†ï¼Œç”±äºJVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å› æ­¤ï¼Œåç»­çš„<code>getInstance()</code>æ–¹æ³•è°ƒç”¨éƒ½æ˜¯ç›´æ¥è¿”å›è¿™ä¸ªå·²ç»åˆå§‹åŒ–å¥½çš„<code>instance</code>ï¼Œä¸éœ€è¦é¢å¤–çš„åŒæ­¥æªæ–½ã€‚</p><p>è¿™å°±æ˜¯é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ã€‚ç”±äºå®ƒåœ¨ç±»åŠ è½½æ—¶å°±å®Œæˆäº†åˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¸å­˜åœ¨å¤šçº¿ç¨‹å¹¶å‘è®¿é—®çš„é—®é¢˜ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><h4 id="é™æ€å†…éƒ¨ç±»-çº¿ç¨‹å®‰å…¨" tabindex="-1">é™æ€å†…éƒ¨ç±»ï¼šçº¿ç¨‹å®‰å…¨ <a class="header-anchor" href="#é™æ€å†…éƒ¨ç±»-çº¿ç¨‹å®‰å…¨" aria-label="Permalink to &quot;é™æ€å†…éƒ¨ç±»ï¼šçº¿ç¨‹å®‰å…¨&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingletonHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance4 INSTANCE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (){}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingleInstance4 </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SingletonHolder.INSTANCE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>è¿è¡Œç»“æœ</p><p>com.jerry.singlePattern.SingleInstance4@7004943 &lt;çº¿ç¨‹23æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance4@7004943 &lt;çº¿ç¨‹20æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance4@7004943 &lt;çº¿ç¨‹24æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance4@7004943 &lt;çº¿ç¨‹21æ­£åœ¨è¿è¡Œ&gt; com.jerry.singlePattern.SingleInstance4@7004943 &lt;çº¿ç¨‹22æ­£åœ¨è¿è¡Œ&gt;</p></blockquote><p>é™æ€å†…éƒ¨ç±»<code>SingletonHolder</code>ä¸­åŒ…å«äº†ä¸€ä¸ªé™æ€å­—æ®µ<code>INSTANCE</code>ï¼Œè¿™ä¸ªå­—æ®µåœ¨é™æ€å†…éƒ¨ç±»è¢«åŠ è½½æ—¶åˆå§‹åŒ–ã€‚ç”±äºJVMçš„ç±»åŠ è½½æœºåˆ¶ä¿è¯äº†ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤é™æ€å†…éƒ¨ç±»ä¸­çš„é™æ€å­—æ®µåªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œå³åœ¨é¦–æ¬¡é€šè¿‡<code>getInstance()</code>æ–¹æ³•è®¿é—®æ—¶ã€‚è¿™å°±ç¡®ä¿äº†å•ä¾‹çš„æ‡’åŠ è½½å’Œçº¿ç¨‹å®‰å…¨ã€‚</p><p>å½“<code>Singleton</code>ç±»è¢«åŠ è½½æ—¶ï¼Œ<code>SingletonHolder</code>ç±»å¹¶ä¸ä¼šç«‹å³è¢«åŠ è½½ã€‚åªæœ‰å½“è°ƒç”¨<code>Singleton.getInstance()</code>æ–¹æ³•æ—¶ï¼Œ<code>SingletonHolder</code>ç±»æ‰ä¼šè¢«åŠ è½½ï¼Œæ­¤æ—¶ä¼šåˆå§‹åŒ–<code>INSTANCE</code>å­—æ®µã€‚ç”±äºç±»çš„åŠ è½½å’Œåˆå§‹åŒ–æ˜¯ç”±JVMåœ¨å†…éƒ¨é€šè¿‡é”æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–çš„åŒæ­¥æªæ–½ã€‚</p><p>å› æ­¤ï¼Œé™æ€å†…éƒ¨ç±»å®ç°å•ä¾‹æ¨¡å¼æ—¢èƒ½å¤Ÿå®ç°æ‡’åŠ è½½ï¼Œåˆèƒ½å¤Ÿåˆ©ç”¨JVMçš„ç±»åŠ è½½æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚è¿™æ˜¯å•ä¾‹æ¨¡å¼ä¸­ä¸€ç§éå¸¸ä¼˜é›…ä¸”é«˜æ•ˆçš„å®ç°æ–¹å¼ã€‚</p><h2 id="æšä¸¾-çº¿ç¨‹å®‰å…¨" tabindex="-1">æšä¸¾ï¼šçº¿ç¨‹å®‰å…¨ <a class="header-anchor" href="#æšä¸¾-çº¿ç¨‹å®‰å…¨" aria-label="Permalink to &quot;æšä¸¾ï¼šçº¿ç¨‹å®‰å…¨&quot;">â€‹</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SingleInstance5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Serializable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    INSTANCE_5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¦‚æœéœ€è¦ï¼Œå¯ä»¥æ·»åŠ å…¶ä»–å±æ€§æˆ–æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String data;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å…¶ä»–éœ€è¦çš„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>è¿è¡Œç»“æœ:</p><p>INSTANCE_5 &lt;çº¿ç¨‹20æ­£åœ¨è¿è¡Œ&gt; INSTANCE_5 &lt;çº¿ç¨‹23æ­£åœ¨è¿è¡Œ&gt; INSTANCE_5 &lt;çº¿ç¨‹22æ­£åœ¨è¿è¡Œ&gt; INSTANCE_5 &lt;çº¿ç¨‹24æ­£åœ¨è¿è¡Œ&gt; INSTANCE_5 &lt;çº¿ç¨‹21æ­£åœ¨è¿è¡Œ&gt;</p></blockquote><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>SingleInstance5</code> æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå®ä¾‹ <code>INSTANCE</code>ã€‚ç”±äºæšä¸¾çš„ç‰¹æ€§ï¼Œè¿™ä¸ªå®ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­éƒ½æ˜¯å”¯ä¸€çš„ã€‚</p><p>è¦è·å–è¿™ä¸ªå•ä¾‹çš„å®ä¾‹ï¼Œåªéœ€è¦è°ƒç”¨ <code>SingleInstance5.INSTANCE</code>ã€‚è¦è®¿é—®æˆ–ä¿®æ”¹å®ƒçš„å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ <code>SingleInstance5.INSTANCE.setData(data)</code> å’Œ <code>SingleInstance5.INSTANCE.getData()</code> æ–¹æ³•ã€‚</p><p>å…³äºåºåˆ—åŒ–ï¼Œç”±äºæšä¸¾å®ä¾‹åœ¨ååºåˆ—åŒ–æ—¶ä¼šè¢«å½“ä½œå•ä¸ªå¯¹è±¡å¤„ç†ï¼Œå› æ­¤ä¸ä¼šå‡ºç°é‡æ–°åˆ›å»ºå®ä¾‹çš„æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä½ å°è¯•åºåˆ—åŒ–å¹¶ååºåˆ—åŒ– <code>SingletonEnum.INSTANCE</code>ï¼Œä½ å¾—åˆ°çš„ä»ç„¶æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚</p><p>ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼çš„å¥½å¤„æ˜¯ç®€å•ã€é«˜æ•ˆä¸”çº¿ç¨‹å®‰å…¨ï¼Œä¸éœ€è¦æ‹…å¿ƒå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ç«æ€æ¡ä»¶æˆ–å…¶ä»–åŒæ­¥é—®é¢˜ã€‚æ­¤å¤–ï¼Œç”±äºæšä¸¾ç±»å‹åœ¨Javaä¸­æ˜¯ç‰¹æ®Šçš„ç±»ï¼Œå®ƒä»¬ä¸èƒ½è¢«ç»§æ‰¿æˆ–åå°„å®ä¾‹åŒ–ï¼Œè¿™è¿›ä¸€æ­¥å¢å¼ºäº†å•ä¾‹çš„å®‰å…¨æ€§ã€‚</p><h2 id="ä¼˜ç¼ºç‚¹" tabindex="-1">ä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#ä¼˜ç¼ºç‚¹" aria-label="Permalink to &quot;ä¼˜ç¼ºç‚¹&quot;">â€‹</a></h2><h3 id="ä¼˜ç‚¹" tabindex="-1">ä¼˜ç‚¹ï¼š <a class="header-anchor" href="#ä¼˜ç‚¹" aria-label="Permalink to &quot;ä¼˜ç‚¹ï¼š&quot;">â€‹</a></h3><ol><li><strong>èŠ‚çœèµ„æº</strong>ï¼šç”±äºç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤å¯ä»¥èŠ‚çº¦ç³»ç»Ÿèµ„æºï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ï¼Œå•ä¾‹æ¨¡å¼æ— ç–‘å¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</li><li><strong>ç®€åŒ–ä»£ç </strong>ï¼šå•ä¾‹æ¨¡å¼æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨åº”ç”¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è®¿é—®è¯¥å®ä¾‹ï¼Œæ— éœ€é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼Œä»è€Œç®€åŒ–äº†ä»£ç ã€‚</li><li><strong>é¿å…æ•°æ®ä¸ä¸€è‡´</strong>ï¼šå•ä¾‹æ¨¡å¼å¯ä»¥ç¡®ä¿æ‰€æœ‰å¯¹è±¡éƒ½è®¿é—®åŒä¸€ä¸ªå®ä¾‹ï¼Œä»è€Œé¿å…äº†ç”±äºå¤šä¸ªå®ä¾‹å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</li></ol><h3 id="ç¼ºç‚¹" tabindex="-1">ç¼ºç‚¹ï¼š <a class="header-anchor" href="#ç¼ºç‚¹" aria-label="Permalink to &quot;ç¼ºç‚¹ï¼š&quot;">â€‹</a></h3><ol><li><strong>æ‰©å±•æ€§å·®</strong>ï¼šç”±äºå•ä¾‹æ¨¡å¼ä¸­æ²¡æœ‰æŠ½è±¡å±‚ï¼Œå› æ­¤å•ä¾‹ç±»çš„æ‰©å±•æœ‰å¾ˆå¤§çš„å›°éš¾ã€‚å¦‚æœéœ€è¦æ‰©å±•å•ä¾‹ç±»çš„åŠŸèƒ½ï¼Œé€šå¸¸éœ€è¦ä¿®æ”¹æºä»£ç ï¼Œè¿™è¿åäº†å¼€é—­åŸåˆ™ã€‚</li><li><strong>èŒè´£è¿‡é‡</strong>ï¼šå•ä¾‹ç±»æ—¢å……å½“äº†å·¥å‚è§’è‰²ï¼Œæä¾›äº†å·¥å‚æ–¹æ³•ï¼ŒåŒæ—¶åˆå……å½“äº†äº§å“è§’è‰²ï¼ŒåŒ…å«ä¸€äº›ä¸šåŠ¡æ–¹æ³•ï¼Œå°†äº§å“çš„åˆ›å»ºå’Œäº§å“çš„æœ¬èº«çš„åŠŸèƒ½èåˆåˆ°ä¸€èµ·ï¼Œå¯¼è‡´èŒè´£è¿‡é‡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿èƒŒäº†â€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚</li><li><strong>çº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ï¼šåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå•ä¾‹æ¨¡å¼çš„å®ç°éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å¦‚æœå®ç°ä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªå®ä¾‹è¢«åˆ›å»ºï¼Œä»è€Œå¼•å‘æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</li><li><strong>æ»¥ç”¨å¯èƒ½å¯¼è‡´é—®é¢˜</strong>ï¼šå¦‚æœæ»¥ç”¨å•ä¾‹æ¨¡å¼ï¼Œä¾‹å¦‚å°†æ•°æ®åº“è¿æ¥æ± è®¾è®¡ä¸ºå•ä¾‹ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…±äº«è¿æ¥æ± å¯¹è±¡çš„ç¨‹åºè¿‡å¤šè€Œå‡ºç°è¿æ¥æ± æº¢å‡ºï¼›å¦‚æœå®ä¾‹åŒ–çš„å¯¹è±¡é•¿æ—¶é—´ä¸è¢«åˆ©ç”¨ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºæ˜¯åƒåœ¾è€Œè¢«å›æ”¶ï¼Œè¿™å°†å¯¼è‡´å¯¹è±¡çŠ¶æ€çš„ä¸¢å¤±ã€‚</li></ol><hr><p>ä»£ç ç›¸å…³ä»£ç å¯ä»¥å‚è€ƒ <strong><a href="https://gitee.com/jerrylau213/DesignPatterns" target="_blank" rel="noreferrer">ä»£ç ä»“åº“ğŸŒ</a></strong></p><p><strong>psï¼šæœ¬æ–‡åŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„</strong></p><hr>`,53),e=[t];function h(p,k,r,g,d,E){return a(),i("div",null,e)}const o=s(l,[["render",h]]);export{y as __pageData,o as default};
